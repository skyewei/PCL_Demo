
本文档是在学习 PCL 时，遇到有关 Cmake 的问题，查阅相关资料后总结的笔记。


- 问题及优化点：
    1. 使用 link_directories 并不是最佳实践，因为它会影响所有的目标，而不是特定的目标。更好的做法是在 target_link_libraries 中直接指定需要链接的库
    2. include_directories同样可能影响所有的目标，应考虑使用target_include_directories 为特定目标指定包含目录。
    3. PCL库的寻找和链接可以更加现代化，使用find_package的CONFIG模式（如果PCL支持）或者通过target_link_libraries的PRIVATE、INTERFACE或PUBLIC关键字更清晰地表达链接范围和依赖。


- 原 CMakeList.txt ：
```Cmake
cmake_minimum_required(VERSION 3.15)

project(filter)

find_package(PCL 1.8 REQUIRED)
include_directories(${PCL_INCLUDE_DIRS})
include_directories(${PROJECT_SOURCE_DIR}/include)
link_directories(${PCL_LIBRARY_DIRS})

add_executable(passfilter main.cpp src/pass.cpp src/voxelgrid.cpp)
target_link_libraries(passfilter ${PCL_LIBRARIES})
```

- 修改后 CMakeList.txt ：
```Cmake
cmake_minimum_required(VERSION 3.15)

project(filter)

find_package(PCL 1.8 REQUIRED)

add_executable(passfilter main.cpp src/pass.cpp src/voxelgrid.cpp)
target_include_directories(passfilter PRIVATE ${PCL_INCLUDE_DIRS} ${PROJECT_SOURCE_DIR}/include)
target_link_libraries(passfilter PRIVATE ${PCL_LIBRARIES})
```

- 优化点总结:
1. 使用 target_include_directories 和 target_link_libraries 代替
include_directories和link_directories，以提供更细粒度的控制。
2. 在 target_link_libraries 中使用PRIVATE关键字，明确链接范围和依赖。

